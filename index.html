<script>
  function generar() {
    let bin = prompt("Ingresa el BIN (ej: 453927)");
    if (!bin || bin.length < 6) {
      document.getElementById("resultado").innerHTML = "Por favor, ingresa un BIN válido de al menos 6 dígitos.";
      return;
    }

    let cantidad = 100;
    let tarjetas = [];

    while (tarjetas.length < cantidad) {
      let tarjeta = generarCC(bin);
      if (luhn(tarjeta)) {
        tarjetas.push(tarjeta);
      }
    }

    document.getElementById("resultado").innerHTML = "<strong>Tarjetas generadas:</strong><br>" + tarjetas.join("<br>");
  }

  function generarCC(bin) {
    let cc = bin;
    while (cc.length < 15) {  // Genera hasta 15 dígitos
      cc += Math.floor(Math.random() * 10);
    }
    let checkDigit = calcularLuhn(cc);
    return cc + checkDigit;
  }

  function calcularLuhn(numero) {
    let sum = 0;
    let alt = true;
    for (let i = numero.length - 1; i >= 0; i--) {
      let n = parseInt(numero.charAt(i));
      if (alt) {
        n *= 2;
        if (n > 9) n -= 9;
      }
      sum += n;
      alt = !alt;
    }
    return (10 - (sum % 10)) % 10;
  }

  function luhn(numero) {
    let sum = 0;
    let alt = false;
    for (let i = numero.length - 1; i >= 0; i--) {
      let n = parseInt(numero.charAt(i));
      if (alt) {
        n *= 2;
        if (n > 9) n -= 9;
      }
      sum += n;
      alt = !alt;
    }
    return sum % 10 === 0;
  }
</script>
